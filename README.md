## Requirements 

- Creating New User Account. The API take user credentials email, password, first name and last name and creates a account.  
- Updating the Credentials of the Existing User. The user can update the password, first and last name for the account created.  
- Creating Book Metadata in a User Account. User can create multiple Book Metadata under a User, the book metadata consist of book name, author, image, ISBN.  
- Delete Book Metadata for a given Book Id Authorized for the User. 
- Uploading a Image for Book Metadata. User can provide a Image for a book. The Image would be taken in the API as multipart/form-data. The supported formats are JPEG/PNG. In the reponse for a Book Metadata, the uploaded Image URL will be provided. 
- Deleting a Image for a Book Metadata. 
- Retrieving all the Books for the User

## Security 

- Basic Auth is used for Create/Update/Delete APIs
  - Authentication is done via Authorization Header passed in the Request which is also known as [Basic Authentication](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Authorization)
  - The GET APIs were un-authenticated.
- Password is stored by hashing it using a SALT. [Bcrypt](https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/crypto/bcrypt/BCrypt.html) provides the SALT and hashing function 
- EBS Volumes and RDS are encrypted by custom managed KMS keys, the KMS keys are custom managed and generated by Infrastructure in Terraform. 


## APIs

**Get User Information** ```GET /v1/user/self```

**Create New User** ```POST /v1/user```

**Upate User Details**  ```PUT /v1/user/self```

**Create a new Book** ```POST /books ```

**Book By Id** ```GET /books/{book_id}```

**Delete Book by Id** ```DELETE /books/{book_id} ```

**Get All Books** ```GET /books```

**Create Image in Book** ```POST /{book_id}/image```

**Delete a Book Image** ```DELETE /{book_id}/image/{image_id}```


### Technology Stack and Infrastructure 

#### Service

- SpringBoot and SpringMVC for RESTFul WebService. Maven is used as Build System.  
- Bcrypt Library for Encryption. 
- AWS S3, SNS SDK Integration 
- Hosted on EC2 
- AWS CodeDeploy Configuration
- MYSQL Integration for connecting to RDS Instance.
- Mockito for writing Unit Tests. 
- StatsD Client Integration for emitting Metrics. 


#### Infrastructure 

##### Service Infrastructure

- [Terraform](https://www.terraform.io/) for Creating the Infrastructure. The following Infrastructure is created from Terraform 
	- EC2
	- VPC
	- Subnet
	- SecurityGroup
	- Lambda 
	- SNS
	- Internet Gateway
	- Route53 Endpoints
	- LoadBalancer
	- TargetGroup
	- KMS Keys (for RDS and EBS Volumes)
	- RDS Instance
- [Packer](https://www.packer.io/) for Creating Amazon Machine Images (AMI) , the AMI generated are used to create instances. 
- EC2 Instances with Auto-Scaling Enabled. 
- EC2 Instances are launched in VPC with multiple subnet and availability zones. 
- Application Logs and Metrics are available in CloudWatch.
- Target Group is created with attaching hosts and Target Group is attached to Load Balancer.  


##### Notification Infrastructure 

- AWS Lambda triggered from SNS Notifications. 
- Amazon SES for Sending Emails to Users for Change Events in Book Metadata


#### Continuous Integration(CI)/Continuous Deployment(CD) Pipeline 

CI/CD Pipeline is created using Github Actions and AWS CodeDeploy. Lambda and Service pipeline, both are CI/CD, the code is maintained using Github Repository. The Github Action aautomated the code deployment by first zipping the code and storing in AWS S3 whenever the code is merged to master branch and then deployment is triggerred using AWS Code Deploy. 

### High Level Diagram

![CloudNetworkingProject](https://user-images.githubusercontent.com/71105442/133917494-26cad512-7f79-4556-a8fb-9d5306379c66.jpeg)
